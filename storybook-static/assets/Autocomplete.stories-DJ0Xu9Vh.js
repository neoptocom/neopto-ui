import{j as r}from"./jsx-runtime-CDt2p4po.js";import{r as s}from"./index-GiUgBvb1.js";import{I as W}from"./IconButton-DEQjXj6b.js";import{T as j}from"./Typo-B4y6jpMu.js";import{A as D}from"./Avatar-C4Kp6Hdw.js";import{A as F}from"./AvatarGroup-JIWVjSW8.js";import"./Icon-DucDLcRo.js";function v({className:f="",title:t,options:u,selectedOption:n,onSelect:N,placeholder:P="",disabled:i=!1,maxHeight:L=152,id:E,...M}){const V=E??s.useId(),C=`${V}-listbox`,[A,k]=s.useState(""),[l,p]=s.useState(!1),[q,o]=s.useState(-1),H=s.useRef(null),O=s.useRef(null),y=s.useMemo(()=>Array.isArray(u)&&typeof u[0]=="string"?u.map(e=>({name:e,label:e,value:e})):u.map(e=>{const a=e.name??e.label??"";return{...e,name:e.name??a,label:e.label??a}}),[u]),g=s.useMemo(()=>{const e=A.trim().toLowerCase();return e?y.filter(a=>{var x,c;const m=((x=a.name)==null?void 0:x.toLowerCase())??"",d=((c=a.label)==null?void 0:c.toLowerCase())??"";return m.includes(e)||d.includes(e)}):y},[y,A]),R=s.useMemo(()=>y.some(e=>!!e.image),[y]),B=e=>e?typeof e=="string"?e:e.name??e.label??"":"",G=n!=null?B(n):A;function $(){i||p(!0)}function h(){p(!1),o(-1)}function S(e){N(e),k(""),h()}function z(){N(null),k(""),h()}function Q(e){if(!l&&(e.key==="ArrowDown"||e.key==="ArrowUp")){p(!0),o(0),e.preventDefault();return}if(l)if(e.key==="ArrowDown")e.preventDefault(),o(a=>Math.min(a+1,g.length-1)),b();else if(e.key==="ArrowUp")e.preventDefault(),o(a=>Math.max(a-1,0)),b();else if(e.key==="Enter"){e.preventDefault();const a=g[q];a&&S(a)}else e.key==="Escape"?(e.preventDefault(),h()):e.key==="Home"?(e.preventDefault(),o(0),b()):e.key==="End"&&(e.preventDefault(),o(g.length-1),b())}function b(){const e=O.current,a=q;if(!e||a<0)return;const m=e.children[a];m==null||m.scrollIntoView({block:"nearest"})}return r.jsxs("div",{ref:H,className:["relative w-full",f].join(" "),...M,children:[r.jsxs("fieldset",{className:["w-full min-w-0 rounded-full border bg-[var(--surface)] transition-colors h-14","border-[var(--border)] focus-within:border-[var(--color-brand)]",i?"opacity-60 cursor-not-allowed":""].join(" "),children:[r.jsx("legend",{className:"ml-4 px-1 text-sm leading-none relative",children:r.jsx(j,{variant:"label-lg",className:["font-normal select-none",l?"text-[var(--color-brand)]":"text-[var(--muted-fg)]",i?"text-[var(--muted-fg)]":""].join(" "),children:t})}),r.jsx("div",{className:"relative flex pl-5 pr-3 pb-1 h-full",children:r.jsxs("div",{className:"flex w-full",children:[r.jsx("input",{id:V,role:"combobox","aria-expanded":l,"aria-controls":C,"aria-autocomplete":"list","aria-disabled":i||void 0,type:"text",value:G,onChange:e=>{k(e.target.value),l||p(!0),o(0)},onFocus:$,onKeyDown:Q,onBlur:()=>setTimeout(h,150),disabled:i,className:["w-full rounded-full border-0 outline-none bg-transparent","text-sm text-[var(--fg)] placeholder:text-[var(--muted-fg)]","pr-2"].join(" "),placeholder:P,onClick:()=>!i&&p(!0)}),r.jsx(W,{icon:n&&!l?"close":"expand_more",onClick:n&&!l?z:()=>p(e=>!e),disabled:i,"aria-label":n&&!l?"Clear":l?"Collapse":"Expand",className:"absolute right-1 top-[-20%]",iconClassName:["transition-transform duration-300 text-[var(--muted-fg)]",l?"rotate-180 text-[var(--color-brand)]":""].join(" ")})]})})]}),l&&!i&&r.jsx("div",{className:["absolute z-20 mt-2 w-full overflow-y-auto rounded-3xl border border-[var(--border)]","bg-[var(--surface)] text-[var(--fg)] shadow-md"].join(" "),style:{maxHeight:L},children:g.length>0?r.jsx("ul",{id:C,role:"listbox",ref:O,children:g.map((e,a)=>{const m=a===q,d=e.name??e.label??"",x=n!=null&&(typeof n=="string"?n===d||n===(e.label??""):(n.name??n.label??"")===d);return r.jsxs("li",{role:"option","aria-selected":x,className:["flex items-center justify-between px-4 py-2 text-sm cursor-pointer transition-colors",m?"bg-[var(--muted)]":"",a!==g.length-1?"border-b border-[var(--border)]":""].join(" "),onMouseEnter:()=>o(a),onMouseDown:c=>c.preventDefault(),onClick:()=>S(e),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[R&&r.jsx(D,{name:d,src:e.image||void 0}),r.jsx(j,{variant:"label-lg",className:"font-normal text-[var(--fg)]",children:d})]}),Array.isArray(e.group)&&e.group.length>0&&r.jsx(F,{children:e.group.map((c,U)=>r.jsx(D,{name:c.name,src:c.image||void 0},U))})]},`${d||a}-${a}`)})}):r.jsx("div",{className:"px-4 py-3",children:r.jsx(j,{variant:"body-sm",className:"text-[var(--muted-fg)]",children:"No results found"})})})]})}v.__docgenInfo={description:"",methods:[],displayName:"Autocomplete",props:{title:{required:!0,tsType:{name:"string"},description:"Label text displayed above the input"},options:{required:!0,tsType:{name:"union",raw:"AutocompleteOption[] | string[]",elements:[{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  name?: string;
  /** @deprecated Prefer using \`name\`. */
  label?: string;
  value: any;
  image?: string;
  group?: Array<{ name: string; image?: string }>;
}`,signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"label",value:{name:"string",required:!1},description:"@deprecated Prefer using `name`."},{key:"value",value:{name:"any",required:!0}},{key:"image",value:{name:"string",required:!1}},{key:"group",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ name: string; image?: string }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"image",value:{name:"string",required:!1}}]}}],raw:"Array<{ name: string; image?: string }>",required:!1}}]}}],raw:"AutocompleteOption[]"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},description:"Array of options to display"},selectedOption:{required:!0,tsType:{name:"union",raw:"AutocompleteOption | string | null",elements:[{name:"signature",type:"object",raw:`{
  name?: string;
  /** @deprecated Prefer using \`name\`. */
  label?: string;
  value: any;
  image?: string;
  group?: Array<{ name: string; image?: string }>;
}`,signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"label",value:{name:"string",required:!1},description:"@deprecated Prefer using `name`."},{key:"value",value:{name:"any",required:!0}},{key:"image",value:{name:"string",required:!1}},{key:"group",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ name: string; image?: string }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"image",value:{name:"string",required:!1}}]}}],raw:"Array<{ name: string; image?: string }>",required:!1}}]}},{name:"string"},{name:"null"}]},description:"Currently selected option"},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(option: AutocompleteOption | string | null) => void",signature:{arguments:[{type:{name:"union",raw:"AutocompleteOption | string | null",elements:[{name:"signature",type:"object",raw:`{
  name?: string;
  /** @deprecated Prefer using \`name\`. */
  label?: string;
  value: any;
  image?: string;
  group?: Array<{ name: string; image?: string }>;
}`,signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"label",value:{name:"string",required:!1},description:"@deprecated Prefer using `name`."},{key:"value",value:{name:"any",required:!0}},{key:"image",value:{name:"string",required:!1}},{key:"group",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ name: string; image?: string }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"image",value:{name:"string",required:!1}}]}}],raw:"Array<{ name: string; image?: string }>",required:!1}}]}},{name:"string"},{name:"null"}]},name:"option"}],return:{name:"void"}}},description:"Callback when an option is selected"},placeholder:{required:!1,tsType:{name:"string"},description:"Placeholder text for the input",defaultValue:{value:'""',computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the component is disabled",defaultValue:{value:"false",computed:!1}},maxHeight:{required:!1,tsType:{name:"number"},description:"Maximum height of the options dropdown",defaultValue:{value:"152",computed:!1}},id:{required:!1,tsType:{name:"string"},description:"Optional id base (for accessibility hooks)"},className:{defaultValue:{value:'""',computed:!1},required:!1}},composes:["Omit"]};try{v.displayName="Autocomplete",v.__docgenInfo={description:"",displayName:"Autocomplete",props:{title:{defaultValue:null,description:"Label text displayed above the input",name:"title",required:!0,type:{name:"string"}},options:{defaultValue:null,description:"Array of options to display",name:"options",required:!0,type:{name:"AutocompleteOption[] | string[]"}},selectedOption:{defaultValue:null,description:"Currently selected option",name:"selectedOption",required:!0,type:{name:"string | AutocompleteOption | null"}},onSelect:{defaultValue:null,description:"Callback when an option is selected",name:"onSelect",required:!0,type:{name:"(option: string | AutocompleteOption | null) => void"}},placeholder:{defaultValue:{value:""},description:"Placeholder text for the input",name:"placeholder",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:!1},description:"Whether the component is disabled",name:"disabled",required:!1,type:{name:"boolean"}},maxHeight:{defaultValue:{value:152},description:"Maximum height of the options dropdown",name:"maxHeight",required:!1,type:{name:"number"}},id:{defaultValue:null,description:"Optional id base (for accessibility hooks)",name:"id",required:!1,type:{name:"string"}}}}}catch{}const K=[{name:"Ada Lovelace",label:"Ada Lovelace",value:"ada",image:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=128&auto=format&fit=facearea&facepad=2"},{name:"Alan Turing",value:"turing"},{name:"Grace Hopper",label:"Grace Hopper",value:"hopper",image:"https://images.unsplash.com/photo-1545184180-25d471fe75d8?q=80&w=128&auto=format&fit=facearea&facepad=2"},{name:"Edsger Dijkstra",value:"dijkstra"},{name:"Barbara Liskov",value:"liskov"}],te={title:"Components/Autocomplete",component:v,args:{title:"Assignee",options:K,selectedOption:null,placeholder:"Search peopleâ€¦",disabled:!1,maxHeight:180}},w={render:f=>{const[t,u]=s.useState(f.selectedOption);return r.jsxs("div",{className:"max-w-md",children:[r.jsx(v,{...f,selectedOption:t,onSelect:u}),r.jsxs("div",{className:"mt-3 text-xs text-[--muted-fg]",children:["Selected:"," ",typeof t=="string"?t:(t==null?void 0:t.name)??(t==null?void 0:t.label)??"none"]})]})}};var I,T,_;w.parameters={...w.parameters,docs:{...(I=w.parameters)==null?void 0:I.docs,source:{originalSource:`{
  render: args => {
    const [value, setValue] = React.useState<AutocompleteOption | string | null>(args.selectedOption);
    return <div className="max-w-md">
        <Autocomplete {...args} selectedOption={value} onSelect={setValue} />
        <div className="mt-3 text-xs text-[--muted-fg]">
          Selected:{" "}
          {typeof value === "string" ? value : value?.name ?? value?.label ?? "none"}
        </div>
      </div>;
  }
}`,...(_=(T=w.parameters)==null?void 0:T.docs)==null?void 0:_.source}}};const ne=["Playground"];export{w as Playground,ne as __namedExportsOrder,te as default};
