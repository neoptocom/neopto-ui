import{j as r}from"./jsx-runtime-CDt2p4po.js";import{r as s}from"./index-GiUgBvb1.js";import{I as Q}from"./Icon-BGfffQ3t.js";import{T as j}from"./Typo-B1DNflFC.js";import{A as T}from"./Avatar-Oy2jbprJ.js";import{A as U}from"./AvatarGroup-DdCv6cY9.js";import"./index-B8ehKEGt.js";function A({className:g="",title:i,options:u,selectedOption:t,onSelect:k,placeholder:V="",disabled:l=!1,maxHeight:E=152,id:M,...L}){const q=M??s.useId(),N=`${q}-listbox`,[b,h]=s.useState(""),[n,m]=s.useState(!1),[w,o]=s.useState(-1),R=s.useRef(null),S=s.useRef(null),d=s.useMemo(()=>Array.isArray(u)&&typeof u[0]=="string"?u.map(e=>({label:e,value:e})):u,[u]),c=s.useMemo(()=>{const e=b.trim().toLowerCase();return e?d.filter(a=>a.label.toLowerCase().includes(e)):d},[d,b]),H=s.useMemo(()=>d.some(e=>!!e.image),[d]),_=t!=null?typeof t=="string"?t:t.label:b;function P(){l||m(!0)}function f(){m(!1),o(-1)}function D(e){k(e),h(""),f()}function z(){k(null),h(""),f()}function $(e){if(!n&&(e.key==="ArrowDown"||e.key==="ArrowUp")){m(!0),o(0),e.preventDefault();return}if(n)if(e.key==="ArrowDown")e.preventDefault(),o(a=>Math.min(a+1,c.length-1)),v();else if(e.key==="ArrowUp")e.preventDefault(),o(a=>Math.max(a-1,0)),v();else if(e.key==="Enter"){e.preventDefault();const a=c[w];a&&D(a)}else e.key==="Escape"?(e.preventDefault(),f()):e.key==="Home"?(e.preventDefault(),o(0),v()):e.key==="End"&&(e.preventDefault(),o(c.length-1),v())}function v(){const e=S.current,a=w;if(!e||a<0)return;const p=e.children[a];p==null||p.scrollIntoView({block:"nearest"})}return r.jsxs("div",{ref:R,className:["relative w-full",g].join(" "),...L,children:[r.jsxs("fieldset",{className:["w-full min-w-0 rounded-full border bg-[var(--surface)] transition-colors h-16","border-[var(--border)] focus-within:border-[var(--color-brand)]",l?"opacity-60 cursor-not-allowed":""].join(" "),children:[r.jsx("legend",{className:"ml-4 px-1 text-sm leading-none relative",children:r.jsx(j,{variant:"label-lg",className:["font-normal select-none",n?"text-[var(--color-brand)]":"text-[var(--muted-fg)]",l?"text-[var(--muted-fg)]":""].join(" "),children:i})}),r.jsx("div",{className:"relative flex px-5 pb-1 h-full",children:r.jsxs("div",{className:"flex w-full",children:[r.jsx("input",{id:q,role:"combobox","aria-expanded":n,"aria-controls":N,"aria-autocomplete":"list","aria-disabled":l||void 0,type:"text",value:_,onChange:e=>{h(e.target.value),n||m(!0),o(0)},onFocus:P,onKeyDown:$,onBlur:()=>setTimeout(f,150),disabled:l,className:["w-full rounded-full border-0 outline-none bg-transparent","text-sm text-[var(--fg)] placeholder:text-[var(--muted-fg)]","pr-2"].join(" "),placeholder:V,onClick:()=>!l&&m(!0)}),r.jsx("button",{type:"button",onClick:t&&!n?z:()=>m(e=>!e),disabled:l,"aria-label":t&&!n?"Clear":n?"Collapse":"Expand",className:["flex items-center justify-center rounded-full bg-transparent",l?"cursor-not-allowed":"hover:bg-[var(--muted)]"].join(" "),children:r.jsx(Q,{name:t&&!n?"close":"expand_more",size:"md",className:["transition-transform duration-300 text-[var(--muted-fg)]",n?"rotate-180 text-[var(--color-brand)]":""].join(" ")})})]})})]}),n&&!l&&r.jsx("div",{className:["absolute z-20 mt-2 w-full overflow-y-auto rounded-3xl border border-[var(--border)]","bg-[var(--surface)] text-[var(--fg)] shadow-md"].join(" "),style:{maxHeight:E},children:c.length>0?r.jsx("ul",{id:N,role:"listbox",ref:S,children:c.map((e,a)=>{const p=a===w,B=t!=null&&(typeof t=="string"?t===e.label:t.label===e.label);return r.jsxs("li",{role:"option","aria-selected":B,className:["flex items-center justify-between px-4 py-2 text-sm cursor-pointer transition-colors",p?"bg-[var(--muted)]":"",a!==c.length-1?"border-b border-[var(--border)]":""].join(" "),onMouseEnter:()=>o(a),onMouseDown:y=>y.preventDefault(),onClick:()=>D(e),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[H&&r.jsx(T,{name:e.label,src:e.image||void 0}),r.jsx(j,{variant:"label-lg",className:"font-normal text-[var(--fg)]",children:e.label})]}),Array.isArray(e.group)&&e.group.length>0&&r.jsx(U,{children:e.group.map((y,G)=>r.jsx(T,{name:y.name,src:y.image||void 0},G))})]},`${e.label}-${a}`)})}):r.jsx("div",{className:"px-4 py-3",children:r.jsx(j,{variant:"body-sm",className:"text-[var(--muted-fg)]",children:"No results found"})})})]})}A.__docgenInfo={description:"",methods:[],displayName:"Autocomplete",props:{title:{required:!0,tsType:{name:"string"},description:"Label text displayed above the input"},options:{required:!0,tsType:{name:"union",raw:"AutocompleteOption[] | string[]",elements:[{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: any;
  image?: string;
  group?: Array<{ name: string; image?: string }>;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"any",required:!0}},{key:"image",value:{name:"string",required:!1}},{key:"group",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ name: string; image?: string }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"image",value:{name:"string",required:!1}}]}}],raw:"Array<{ name: string; image?: string }>",required:!1}}]}}],raw:"AutocompleteOption[]"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},description:"Array of options to display"},selectedOption:{required:!0,tsType:{name:"union",raw:"AutocompleteOption | string | null",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: any;
  image?: string;
  group?: Array<{ name: string; image?: string }>;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"any",required:!0}},{key:"image",value:{name:"string",required:!1}},{key:"group",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ name: string; image?: string }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"image",value:{name:"string",required:!1}}]}}],raw:"Array<{ name: string; image?: string }>",required:!1}}]}},{name:"string"},{name:"null"}]},description:"Currently selected option"},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(option: AutocompleteOption | string | null) => void",signature:{arguments:[{type:{name:"union",raw:"AutocompleteOption | string | null",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: any;
  image?: string;
  group?: Array<{ name: string; image?: string }>;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"any",required:!0}},{key:"image",value:{name:"string",required:!1}},{key:"group",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ name: string; image?: string }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"image",value:{name:"string",required:!1}}]}}],raw:"Array<{ name: string; image?: string }>",required:!1}}]}},{name:"string"},{name:"null"}]},name:"option"}],return:{name:"void"}}},description:"Callback when an option is selected"},placeholder:{required:!1,tsType:{name:"string"},description:"Placeholder text for the input",defaultValue:{value:'""',computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the component is disabled",defaultValue:{value:"false",computed:!1}},maxHeight:{required:!1,tsType:{name:"number"},description:"Maximum height of the options dropdown",defaultValue:{value:"152",computed:!1}},id:{required:!1,tsType:{name:"string"},description:"Optional id base (for accessibility hooks)"},className:{defaultValue:{value:'""',computed:!1},required:!1}},composes:["Omit"]};const F=[{label:"Ada Lovelace",value:"ada",image:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=128&auto=format&fit=facearea&facepad=2"},{label:"Alan Turing",value:"turing"},{label:"Grace Hopper",value:"hopper",image:"https://images.unsplash.com/photo-1545184180-25d471fe75d8?q=80&w=128&auto=format&fit=facearea&facepad=2"},{label:"Edsger Dijkstra",value:"dijkstra"},{label:"Barbara Liskov",value:"liskov"}],re={title:"Components/Autocomplete",component:A,args:{title:"Assignee",options:F,selectedOption:null,placeholder:"Search peopleâ€¦",disabled:!1,maxHeight:180}},x={render:g=>{const[i,u]=s.useState(g.selectedOption);return r.jsxs("div",{className:"max-w-md",children:[r.jsx(A,{...g,selectedOption:i,onSelect:u}),r.jsxs("div",{className:"mt-3 text-xs text-[--muted-fg]",children:["Selected: ",typeof i=="string"?i:(i==null?void 0:i.label)??"none"]})]})}};var C,I,O;x.parameters={...x.parameters,docs:{...(C=x.parameters)==null?void 0:C.docs,source:{originalSource:`{
  render: args => {
    const [value, setValue] = React.useState<AutocompleteOption | string | null>(args.selectedOption);
    return <div className="max-w-md">
        <Autocomplete {...args} selectedOption={value} onSelect={setValue} />
        <div className="mt-3 text-xs text-[--muted-fg]">
          Selected: {typeof value === "string" ? value : value?.label ?? "none"}
        </div>
      </div>;
  }
}`,...(O=(I=x.parameters)==null?void 0:I.docs)==null?void 0:O.source}}};const ae=["Playground"];export{x as Playground,ae as __namedExportsOrder,re as default};
